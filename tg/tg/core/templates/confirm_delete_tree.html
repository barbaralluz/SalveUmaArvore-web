{% extends "base.html" %}

{% load staticfiles %}

{% block title %}
    Deletar Árvore {{ object.id }}
{% endblock %}

{% block content %}
  
  <link href="{% static 'css/delete_tree.css' %}" rel="stylesheet" />
 
  <div class="container">

    <div class="row profile">
      <div class="col-md-3">

        <!-- Sidebar -->
        <div class="profile-sidebar">
        
          <!-- Imagem -->
          <div class="profile-userpic">
            <img src="/static/img/user.png" class="img-responsive" alt="">
          </div>
        
          <!-- Titulo -->
          <div class="profile-usertitle">
            <div class="profile-usertitle-name" font style="text-transform: uppercase;"> 
              {{user.username}} 
            </div>
          </div>
        
          <!-- Menu -->
          <div class="profile-usermenu">
            <ul class="nav">
              <li>
                <a href="{% url 'profile' %}">
                  <i class="glyphicon glyphicon-user"></i>
                  MEU PERFIL
                </a> 
              </li>
              
              <li>
                <a href="{% url 'password_change' %}">
                  <i class="glyphicon glyphicon-cog"></i>
                  ALTERAR SENHA
                </a>
              </li>
            
              <li>
                <a href="{% url 'map' %}">
                  <span class="glyphicon glyphicon-map-marker"></span>
                    VISUALIZAR MEU MAPA
                </a>
              </li>
              
              <li>
                <a href="javascript:;" data-toggle="collapse" data-target="#demo">
                  <span class="glyphicon glyphicon-tree-deciduous"></span>
                  ÁRVORE 
                  <i class="fa fa-fw fa-caret-down"></i>
                </a>
                <ul id="demo" class="nav">
                  <li>
                    
                    <li>  
                      <a href="{% url 'tree_form' %}">
                        <i class="glyphicon glyphicon-plus-sign"></i>
                        ADICIONAR
                      </a>
                    </li>
                  
                    <li class="active">
                      <a href="{% url 'tree_list' %}">
                        <i class="glyphicon glyphicon-list"></i>
                        LISTAR | EDITAR | EXCLUIR 
                      </a>
                    </li>

                  </li>
                </ul>
              </li>
         
            </ul>

          </div> <!-- Final do Menu -->
        </div> <!-- Final do Sidebar -->
      </div> <!-- Final do Div md-6 -->
       
      <div class="col-md-9">
        <div class="profile-content" style="font-family:sans-serif">
 
          <br/>
    
          <div class="col-md-3">
            <p align="center"><h4>DADOS DA ÁRVORE</h4></p>
            <label style="font-weight: normal;">Id: {{ object.id }}</label>
            <br/> 
            <label style="font-weight: normal;">Espécie: {{ object.especie }}</label>
            <br/> 
            <label style="font-weight: normal;">Latitude: {{ object.latitude }}</label>
            <br/> 
            <label style="font-weight: normal;">Longitude: {{ object.longitude }}</label>
          </div>
        
          <div class="col-md-9" align= "right" >
            <div id="mapdiv" style="width: 500px; height: 300px;"></div> <!-- Mapa -->
          </div>

          <div class="col-md-12" align= "right">
            <p>
              <form method="post">
                {% csrf_token %}
                <label style="font-weight: normal;">Confirma deleção da árvore "{{object.id}}"?</label>
                <br/>
                <br/>
                <button type="submit" class="btn btn-danger">
                  <span class="glyphicon glyphicon-trash"></span> 
                  Confirmar
                </button>
           	  
                &nbsp;
                &nbsp;
                &nbsp; 

                <a href="{% url 'tree_list' %}" class="btn btn-primary btn-warning">Cancelar</a>
              </form>
            </p>
          </div>
        </div>
      </div> <!-- Final do Div md-9 -->
    </div>

  </div> <!-- Final do Container -->
  
  <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script type="text/javascript">  
     
      var map = new OpenLayers.Map('mapdiv');
                
      map.addLayer(new OpenLayers.Layer.OSM());
      map.zoomToMaxExtent();

      //aparece icone em local já cadastrado
      var lonlat = new OpenLayers.LonLat( {{object.longitude}}, {{object.latitude}} )
        
      markers = new OpenLayers.Layer.Markers( "Markers" );
      markers.id = "Markers";
      map.addLayer(markers);
          
      var size = new OpenLayers.Size(32,36);
      var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
      var icon = new OpenLayers.Icon('/static/img/marker.png', size, offset);   
      var markerslayer = map.getLayer('Markers');

      markerslayer.addMarker(new OpenLayers.Marker(lonlat,icon));

      lonlat.transform(
        new OpenLayers.Projection("EPSG:4326"), 
        map.getProjectionObject() 
      );

      map.setCenter (lonlat, 16);
  </script>

{% endblock content %}